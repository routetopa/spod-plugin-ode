<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title></title>

    <script>

        var addedJs = 0;
        var dynamicAddedJs = [];
        dynamicAddedJs[0] = parent.ODE.ode_webcomponents_js;
        dynamicAddedJs[1] = parent.ODE.ode_deep_client.substring(0, parent.ODE.ode_deep_client.lastIndexOf("/")) + "/jquery-2.1.0.min.js";
        dynamicAddedJs[2] = parent.ODE.ode_deep_client;

        function loadScript(sScriptSrc, oCallback)
        {
            var oHead = document.getElementsByTagName("head")[0];
            var oScript = document.createElement('script');
            oScript.type = 'text/javascript';
            oScript.src = sScriptSrc;

            // most browsers
            oScript.onload = oCallback;

            // IE 6 & 7
            oScript.onreadystatechange = function() {
                if (this.readyState == 'complete') {
                    oCallback();
                }
            };

            oHead.appendChild(oScript);
        }

        var onLoadCallback = function ()
        {
            if(addedJs == (dynamicAddedJs.length-1))
            {
                ComponentService.deep_url = parent.ODE.deep_url;

                var params =
                {
                    'deep-url'          : parent.ODE.deep_url,
                    'datalets-list-url' : parent.ODE.deep_datalet_list,
                    'datasets'          : parent.ODE.ode_dataset_list
                };

                if(parent.SPODPR != undefined && parent.SPODPR.ControlletPresets != undefined)
                {
                  params["selected-fields"]  = '[' + parent.SPODPR.ControlletPresets["selected-fields"] + ']';
                  params["selected-datalet"] = parent.SPODPR.ControlletPresets["selected-datalet"];
                  params["datalet-preset"]   = parent.SPODPR.ControlletPresets["datalet-preset"];

                  //Reser controllet presets
                  parent.SPODPR.ControlletPresets = undefined;
                }

                ComponentService.getComponent({
                    component   : "data-sevc-controllet",
                    params      : params,
                    fields      : Array(),
                    placeHolder : "ode_controllet_placeholder_float"
                });

                window.addEventListener('data-sevc-controllet.dataletCreated', function(e){
                    parent.ODE.savedDataletListener(e);
                });

                return;
            }

            addedJs++;
            loadScript(dynamicAddedJs[addedJs], onLoadCallback);
        };

        loadScript(dynamicAddedJs[addedJs], onLoadCallback);

    </script>

</head>
<body>

<div id="ode_controllet_placeholder_float"></div>

</body>
</html>